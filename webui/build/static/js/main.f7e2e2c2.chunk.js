(this.webpackJsonpwebui=this.webpackJsonpwebui||[]).push([[0],{151:function(e,t,a){},152:function(e,t,a){},181:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),i=a.n(c),r=a(13),o=a.n(r),s=(a(151),a(152),a(233)),l=a(234),d=a(235),j=a(71),u=a(17),b=a(117),h=a(236),x=function(e){var t=Object(u.a)(),a=Object(b.a)({palette:{primary:{light:s.a[600],main:s.a[800],dark:s.a[800],contrastText:t.palette.getContrastText(s.a[800])},accent:{light:l.a[200],main:l.a[500],dark:l.a[800],contrastText:t.palette.getContrastText(l.a[500])},secondary:{light:s.a[600],main:s.a[700],dark:s.a[800],contrastText:t.palette.getContrastText(s.a[600])},notSelected:{light:d.a[500],main:d.a[700],dark:d.a[800],contrastText:t.palette.getContrastText(d.a[600])},error:{light:j.a[200],main:j.a[500],dark:j.a[800],contrastText:t.palette.getContrastText(j.a[500])}}});return Object(n.jsx)(h.a,{theme:a,children:e.children})},m=a(8),O=a(238),f=a(240),g=a(59),p=a(58),v=function(){var e=Object(p.a)((function(e){return{navbarDisplayFlex:{display:"flex",justifyContent:"space-between"},navDisplayFlex:{display:"flex-right",justifyContent:"space-between"},linkText:{textDecoration:"none",textTransform:"uppercase",color:"white"},appBar:{zIndex:e.zIndex.drawer+1}}}))();return Object(n.jsx)(O.a,{position:"static",className:e.appBar,children:Object(n.jsx)(f.a,{children:Object(n.jsx)(g.a,{variant:"h6",children:"SensiML Streaming Gateway"})})})},y=a(247),S=a(184),w=a(185),C=a(186),D=a(241),N=a(113),I=a.n(N),T=a(111),k=a.n(T),R=a(110),M=a.n(R),_=a(112),L=a.n(_),B=Object(p.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)}}})),E=function(e){switch(e.index){case 0:return Object(n.jsx)(M.a,{});case 1:return Object(n.jsx)(k.a,{});case 2:return Object(n.jsx)(L.a,{});default:return Object(n.jsx)(I.a,{})}},G=function(e){var t=B();return Object(n.jsxs)(y.a,{className:t.drawer,variant:"permanent",classes:{paper:t.drawerPaper},children:[Object(n.jsx)(f.a,{}),Object(n.jsx)("div",{className:t.drawerContainer,children:Object(n.jsx)(S.a,{children:["Gateway Status","Configure Gateway","Stream"].map((function(t,a){return Object(n.jsxs)(w.a,{button:!0,onClick:(c=a,function(t){e.onChange(c)}),children:[Object(n.jsx)(C.a,{children:Object(n.jsx)(E,{index:a,children:" "})}),Object(n.jsx)(D.a,{primary:t})]},t);var c}))})})]})},z=a(114),P=function(){return Object(p.a)((function(e){return{root:{display:"flex"},toolbar:Object(z.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,width:"100%",padding:e.spacing(5,40),justifyContent:"flex-end"}}}))()},A=a(242),F=a(34),J=a.n(F),q=function(e){var t=Object(c.useState)([]),a=Object(m.a)(t,2),i=a[0],r=a[1];return Object(c.useEffect)((function(){J.a.get("".concat("http://localhost:5555/","config")).then((function(t){return r(function(t){t.mode&&e.setStreamingMode(t.mode);return t.streaming=t.streaming?"Yes":"No",e.setColumns(Object.keys(t.column_location).sort()),e.setStreamingSource(t.source),e.setDeviceID(t.device_id),t.column_location="column_location"in t?Object.keys(t.column_location).sort().join(", "):[],t}(t.data))}))}),[]),Object(n.jsxs)(A.a,{xs:12,children:[Object(n.jsxs)(A.a,{children:[Object(n.jsx)(g.a,{color:"primary",children:" Configured Mode: "}),Object(n.jsx)(g.a,{children:i.mode}),Object(n.jsx)(g.a,{color:"primary",children:"Streaming: "}),Object(n.jsx)(g.a,{children:i.streaming}),Object(n.jsx)(g.a,{color:"primary",children:"Sensors: "}),Object(n.jsx)(g.a,{children:i.source}),Object(n.jsx)(g.a,{color:"primary",children:"Device ID: "}),Object(n.jsx)(g.a,{children:i.device_id})]}),"streaming"===i.mode?Object(n.jsxs)(A.a,{children:[Object(n.jsx)(g.a,{color:"primary",children:"Sample Rate: "}),Object(n.jsx)(g.a,{children:i.sample_rate}),Object(n.jsx)(g.a,{color:"primary",children:"Columns:"}),Object(n.jsx)(g.a,{children:i.column_location})]}):Object(n.jsx)(n.Fragment,{})]})},U=a(246),Y=a(248),H=a(192),K=a(52),Q=a(191),V=a(189),W=a(53),X=a(121),Z=a(69),$=Object(p.a)((function(e){return{formControl:{margin:e.spacing(3)},button:{margin:e.spacing(1,1,0,0)},root:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)}}})),ee=function(e){var t=$(),a=i.a.useState(e.streamingSource),c=Object(m.a)(a,2),r=c[0],o=c[1],s=i.a.useState("results"===e.streamingMode?"config-results":"config"),l=Object(m.a)(s,2),d=l[0],j=l[1],u=i.a.useState(e.deviceID),b=Object(m.a)(u,2),h=b[0],x=b[1],O=i.a.useState(!1),f=Object(m.a)(O,2),g=f[0],p=f[1],v=i.a.useState(""),y=Object(m.a)(v,2),S=y[0],w=y[1],C=i.a.useState([]),D=Object(m.a)(C,2),N=D[0],I=D[1],T=i.a.useState([{field:"id",headerName:"ID",width:120},{field:"device_id",headerName:"Device ID",width:240},{field:"name",headerName:"Name",width:240}]),k=Object(m.a)(T,2),R=k[0];k[1];return Object(n.jsxs)(A.a,{xs:12,container:!0,direction:"columns",children:[Object(n.jsx)(A.a,{xs:4,children:Object(n.jsx)("form",{onSubmit:function(t){t.preventDefault(),""!==h?(console.log(r),console.log(h),J.a.post("".concat("http://localhost:5555/")+d,{device_id:h,source:r.toLowerCase()}).then((function(t){console.log(t.data),console.log(e),e.setStreamingMode(t.data.mode),w("Configured Device")})).catch((function(e){e.response?(w(e.response.data.error.message.join(", ")),console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message)}))):w("Must Set DeviceID")},children:Object(n.jsxs)(K.a,{component:"fieldset",error:g,className:t.formControl,children:[Object(n.jsx)(V.a,{component:"legend",children:"Source:"}),Object(n.jsxs)(Y.a,{"aria-label":"source",name:"source",value:r,onChange:function(e){o(e.target.value)},children:[Object(n.jsx)(H.a,{value:"SERIAL",control:Object(n.jsx)(U.a,{}),label:"Serial"}),Object(n.jsx)(H.a,{value:"BLE",control:Object(n.jsx)(U.a,{}),label:"BLE"}),Object(n.jsx)(H.a,{value:"TCPIP",control:Object(n.jsx)(U.a,{}),label:"TCP/IP"}),Object(n.jsx)(H.a,{value:"TEST",control:Object(n.jsx)(U.a,{}),label:"Test"})]}),Object(n.jsx)(V.a,{component:"legend",children:"Mode:"}),Object(n.jsxs)(Y.a,{"aria-label":"mode",name:"Streaming Source",value:d,onChange:function(e){j(e.target.value)},children:[Object(n.jsx)(H.a,{value:"config",control:Object(n.jsx)(U.a,{}),label:"Data Collection"}),Object(n.jsx)(H.a,{value:"config-results",control:Object(n.jsx)(U.a,{}),label:"Recognition"})]}),Object(n.jsx)(V.a,{component:"legend",children:"Device ID:"}),Object(n.jsx)(X.a,{id:"outlined-basic",variant:"outlined",value:h,onChange:function(e){x(e.target.value),w(" "),p(!1)}}),Object(n.jsx)(W.a,{type:"submit",variant:"outlined",color:"primary",className:t.button,children:"Configure"}),Object(n.jsx)(Q.a,{children:S})]})})}),Object(n.jsxs)(A.a,{xs:8,children:[Object(n.jsx)(W.a,{type:"submit",variant:"outlined",color:"primary",className:t.button,onClick:function(){J.a.post("".concat("http://localhost:5555/","scan"),{device_id:h,source:r.toLowerCase()}).then((function(e){console.log(e.data),I(e.data)}))},children:"Scan"}),Object(n.jsx)(Z.a,{rows:N,columns:R,onRowSelected:function(e){console.log(e.data.device_id),x(e.data.device_id)}})]})]})},te=a(18),ae=a(116),ne=a.n(ae),ce=function(e){return Object(n.jsx)(ne.a,{data:e.data,layout:{autosize:!0}})},ie=a(243),re=Object(p.a)((function(e){return{root:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},section1:{margin:e.spacing(3,2)},section2:{margin:e.spacing(2),textAlign:"center"}}}));var oe=function(e,t,a,n){fetch(t,{method:"GET"}).then((function(e){var t=e.body.getReader(),c=new ReadableStream({start:function(e){!function c(){t.read().then((function(t){var i=t.done,r=t.value;if(i)e.close();else{var o=new Int16Array(r.buffer);a(function(e,t){for(var a=e.length/t.length,n=Object(te.a)(Array(a).keys()),c=t.map((function(e){return{x:n,y:[],name:e}})),i=0;i<e.length;i+=t.length)for(var r=0;r<t.length;r++)c[r].y.push(e[i+r]);return c}(o,n)),c()}}))}()}});return new Response(c,{headers:{"Content-Type":"text/html"}})}))},se=function(e){var t=re();Object(u.a)();return Object(n.jsxs)("div",{className:t.details,children:[Object(n.jsx)("div",{className:t.section1,children:Object(n.jsxs)(A.a,{container:!0,spacing:2,rows:!0,children:[Object(n.jsx)(A.a,{item:!0,xs:8,children:Object(n.jsx)(g.a,{component:"h3",variant:"h3",color:"secondary",children:"Mode: Data Collection"})}),Object(n.jsx)(A.a,{item:!0,children:Object(n.jsx)("div",{className:t.controls,children:Object(n.jsx)(W.a,{"aria-label":"disconnect",color:"primary",variant:"contained",onClick:function(){oe(0,"".concat("http://localhost:5555/","stream"),e.setStreamData,e.columns)},children:"Stream"})})}),Object(n.jsx)(A.a,{item:!0,children:Object(n.jsx)("div",{className:t.controls,children:Object(n.jsx)(W.a,{color:"secondary",variant:"contained","aria-label":"disconnect",onClick:function(){J.a.get("".concat("http://localhost:5555/","disconnect")).then((function(e){console.log(e.data)}))},children:"Disconnect"})})})]})}),Object(n.jsx)(ie.a,{variant:"middle"}),Object(n.jsx)("div",{className:t.section2,children:Object(n.jsx)(g.a,{variant:"subtitle1",color:"textSecondary"})}),Object(n.jsx)(ce,{data:e.streamData})]})},le=function(e){return Object(n.jsx)(g.a,{variant:"h1",component:"h2",children:function(e,t){if(0===e.length)return"No Results";t>e.length&&(t=e.length-1);for(var a={},n=e.length-t;n<e.length;n++)e[n].Classification in a?a[e[n].Classification]+=1:a[e[n].Classification]=1;for(var c=0,i=0,r=0,o=Object.entries(a);r<o.length;r++){var s=Object(m.a)(o[r],2),l=s[0],d=s[1];d>i&&(i=d,c=l)}return i<t/2?"UNC":c}(e.data,e.filter_length)})},de=a(249),je=0,ue=Object(p.a)((function(e){return{controls:{display:"flex-right",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},sliderroot:{width:250},sliderinput:{width:42},section1:{margin:e.spacing(3,2)},section2:{margin:e.spacing(2),textAlign:"center"}}}));var be=function(e,t,a){je=0,a([]),fetch(t,{method:"GET"}).then((function(e){var t=e.body.getReader(),n=new ReadableStream({start:function(e){!function n(){t.read().then((function(t){var c=t.done,i=t.value;if(c)e.close();else{for(var r=function(e){var t=String.fromCharCode.apply(null,e).split("\n");return t.pop(),t.map((function(e){return JSON.parse(e)}))}(i),o=0;o<r.length;o++)console.log(r[o]),r[o].id=je,je+=1,a((function(e){return[].concat(Object(te.a)(e),[r[o]])}));n()}}))}()}});return new Response(n,{headers:{"Content-Type":"text/html"}})}))},he=function(e){var t=i.a.useState([{field:"id",headerName:"ID",width:70},{field:"ModelNumber",headerName:"Model ID",width:240},{field:"Classification",headerName:"Classification",width:240}]),a=Object(m.a)(t,2),c=a[0],r=(a[1],i.a.useState(1)),o=Object(m.a)(r,2),s=o[0],l=o[1],d=ue();Object(u.a)();return Object(n.jsxs)(A.a,{children:[Object(n.jsx)("div",{className:d.section1,children:Object(n.jsxs)(A.a,{container:!0,spacing:2,rows:!0,children:[Object(n.jsx)(A.a,{item:!0,xs:8,children:Object(n.jsx)(g.a,{component:"h3",variant:"h3",color:"secondary",children:"Mode: Recogntion"})}),Object(n.jsx)(A.a,{item:!0,children:Object(n.jsx)("div",{className:d.controls,children:Object(n.jsx)(W.a,{"aria-label":"disconnect",color:"primary",variant:"contained",onClick:function(){be(0,"".concat("http://localhost:5555/","results"),e.setDeviceRows)},children:"Connect"})})}),Object(n.jsx)(A.a,{item:!0,children:Object(n.jsx)("div",{className:d.controls,children:Object(n.jsx)(W.a,{"aria-label":"disconnect",color:"secondary",variant:"contained",onClick:function(){J.a.get("".concat("http://localhost:5555/","disconnect")).then((function(e){console.log(e.data)}))},children:"Disconnect"})})})]})}),Object(n.jsx)(ie.a,{variant:"middle"}),Object(n.jsx)("div",{className:d.section2,children:Object(n.jsx)(A.a,{alignContent:"center",children:Object(n.jsx)(le,{data:e.deviceRows,filter_length:s})})}),Object(n.jsx)(ie.a,{variant:"middle"}),Object(n.jsx)("div",{className:d.section1,children:Object(n.jsxs)(A.a,{container:!0,spacing:3,alignItems:"center",children:[Object(n.jsx)(A.a,{item:!0,children:" Filter Length "}),Object(n.jsx)("div",{className:d.sliderroot,children:Object(n.jsx)(A.a,{item:!0,xs:!0,children:Object(n.jsx)(de.a,{value:"number"===typeof s?s:1,onChange:function(e,t){console.log(t),l(t)},"aria-labelledby":"input-slider",min:1,max:10})})}),Object(n.jsxs)(A.a,{item:!0,children:[" ",s," "]})]})}),Object(n.jsx)(ie.a,{variant:"middle"}),Object(n.jsx)("div",{className:d.section1,children:Object(n.jsx)("div",{style:{height:600,width:"100%"},children:Object(n.jsx)(Z.a,{rows:e.deviceRows,columns:c,pageSize:15,sortModel:[{field:"id",sort:"desc"}]})})})]})},xe=a(244),me=function(){var e=i.a.useState(0),t=Object(m.a)(e,2),a=t[0],c=t[1],r=i.a.useState(0),o=Object(m.a)(r,2),s=o[0],l=o[1],d=i.a.useState(0),j=Object(m.a)(d,2),u=j[0],b=j[1],h=i.a.useState([]),x=Object(m.a)(h,2),O=x[0],f=x[1],g=i.a.useState([]),p=Object(m.a)(g,2),y=p[0],S=p[1],w=i.a.useState([]),C=Object(m.a)(w,2),D=C[0],N=C[1],I=i.a.useState([]),T=Object(m.a)(I,2),k=T[0],R=T[1];var M=P();return Object(n.jsxs)("div",{className:M.root,children:[Object(n.jsx)(xe.a,{}),Object(n.jsxs)(A.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(n.jsx)(v,{}),Object(n.jsx)(G,{onChange:function(e){a!=e&&c(e)}}),Object(n.jsxs)("main",{className:M.content,children:[0===a?Object(n.jsx)(q,{setStreamingMode:l,setColumns:N,setStreamingSource:b,setDeviceID:R}):null,1===a?Object(n.jsx)(ee,{setStreamingMode:l,streamingSource:u,streamingMode:s,deviceID:k}):null,2===a?"results"==s?Object(n.jsx)(he,{deviceRows:y,setDeviceRows:S}):Object(n.jsx)(se,{streamData:O,setStreamData:f,columns:D}):null]})]})]})},Oe=function(){return Object(n.jsx)(x,{children:Object(n.jsx)(me,{})})};o.a.render(Object(n.jsx)(Oe,{}),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.f7e2e2c2.chunk.js.map