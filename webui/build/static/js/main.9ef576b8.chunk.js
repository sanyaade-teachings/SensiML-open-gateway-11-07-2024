(this.webpackJsonpwebui=this.webpackJsonpwebui||[]).push([[0],{151:function(e,t,n){},152:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),i=n.n(c),r=n(13),o=n.n(r),s=(n(151),n(152),n(233)),l=n(234),d=n(235),j=n(71),u=n(17),b=n(118),x=n(236),h=function(e){var t=Object(u.a)(),n=Object(b.a)({palette:{primary:{light:s.a[600],main:s.a[800],dark:s.a[800],contrastText:t.palette.getContrastText(s.a[800])},accent:{light:l.a[200],main:l.a[500],dark:l.a[800],contrastText:t.palette.getContrastText(l.a[500])},secondary:{light:s.a[600],main:s.a[700],dark:s.a[800],contrastText:t.palette.getContrastText(s.a[600])},notSelected:{light:d.a[500],main:d.a[700],dark:d.a[800],contrastText:t.palette.getContrastText(d.a[600])},error:{light:j.a[200],main:j.a[500],dark:j.a[800],contrastText:t.palette.getContrastText(j.a[500])}}});return Object(a.jsx)(x.a,{theme:n,children:e.children})},m=n(7),O=n(238),f=n(240),g=n(59),p=n(58),v=function(){var e=Object(p.a)((function(e){return{navbarDisplayFlex:{display:"flex",justifyContent:"space-between"},navDisplayFlex:{display:"flex-right",justifyContent:"space-between"},linkText:{textDecoration:"none",textTransform:"uppercase",color:"white"},appBar:{zIndex:e.zIndex.drawer+1}}}))();return Object(a.jsx)(O.a,{position:"static",className:e.appBar,children:Object(a.jsx)(f.a,{children:Object(a.jsx)(g.a,{variant:"h6",children:"SensiML Streaming Gateway"})})})},y=n(247),S=n(184),C=n(185),w=n(186),N=n(241),D=n(114),I=n.n(D),T=n(112),k=n.n(T),_=n(111),M=n.n(_),R=n(113),L=n.n(R),B=Object(p.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)}}})),E=function(e){switch(e.index){case 0:return Object(a.jsx)(M.a,{});case 1:return Object(a.jsx)(k.a,{});case 2:return Object(a.jsx)(L.a,{});default:return Object(a.jsx)(I.a,{})}},G=function(e){var t=B();return Object(a.jsxs)(y.a,{className:t.drawer,variant:"permanent",classes:{paper:t.drawerPaper},children:[Object(a.jsx)(f.a,{}),Object(a.jsx)("div",{className:t.drawerContainer,children:Object(a.jsx)(S.a,{children:["Gateway Status","Configure Gateway","Stream"].map((function(t,n){return Object(a.jsxs)(C.a,{button:!0,onClick:(c=n,function(t){e.onChange(c)}),children:[Object(a.jsx)(w.a,{children:Object(a.jsx)(E,{index:n,children:" "})}),Object(a.jsx)(N.a,{primary:t})]},t);var c}))})})]})},z=n(115),A=function(){return Object(p.a)((function(e){return{root:{display:"flex"},toolbar:Object(z.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,width:"100%",padding:e.spacing(5,40),justifyContent:"flex-end"}}}))()},P=n(242),F=n(35),J=n.n(F),q=n(52),U=Object(p.a)((function(e){return{root:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},section1:{margin:e.spacing(3,2)},section2:{margin:e.spacing(2),textAlign:"center"}}})),Y=function(e){var t=U(),n=(Object(u.a)(),Object(c.useState)([])),i=Object(m.a)(n,2),r=i[0],o=i[1];Object(c.useEffect)((function(){J.a.get("".concat("http://localhost:5555/","config")).then((function(e){return o(s(e.data))}))}),[]);function s(t){return t.mode&&e.setStreamingMode(t.mode),t.streaming=t.streaming?"Yes":"No",e.setColumns(Object.keys(t.column_location).sort()),e.setStreamingSource(t.source),e.setDeviceID(t.device_id),t.column_location="column_location"in t?Object.keys(t.column_location).sort().join(", "):[],t}return Object(a.jsxs)(P.a,{children:[Object(a.jsxs)(P.a,{container:!0,spacing:2,rows:!0,children:[Object(a.jsx)(P.a,{item:!0,xs:8,children:Object(a.jsxs)(g.a,{component:"h3",variant:"h3",color:"secondary",children:["Connected: ",r.streaming]})}),Object(a.jsx)(P.a,{item:!0,xs:4,children:Object(a.jsx)("div",{className:t.controls,children:Object(a.jsxs)(P.a,{container:!0,rows:!0,spacing:2,children:[Object(a.jsx)(P.a,{item:!0,children:Object(a.jsx)(q.a,{color:"secondary",variant:"contained","aria-label":"connect",onClick:function(){!function(e,t){J.a.get("".concat("http://localhost:5555/","connect")).then((function(e){return t(s(e.data))}))}(0,o)},children:"Connect"})}),Object(a.jsx)(P.a,{item:!0,children:Object(a.jsx)(q.a,{color:"secondary",variant:"contained","aria-label":"disconnect",onClick:function(){!function(e,t){J.a.get("".concat("http://localhost:5555/","disconnect")).then((function(e){return t(s(e.data))}))}(0,o)},children:"Disconnect"})})]})})})]}),Object(a.jsxs)(P.a,{xs:12,children:[Object(a.jsxs)(P.a,{children:[Object(a.jsx)(g.a,{color:"primary",children:" Configured Mode: "}),Object(a.jsx)(g.a,{children:r.mode}),Object(a.jsx)(g.a,{color:"primary",children:"Sensors: "}),Object(a.jsx)(g.a,{children:r.source}),Object(a.jsx)(g.a,{color:"primary",children:"Device ID: "}),Object(a.jsx)(g.a,{children:r.device_id})]}),"data_capture"===r.mode?Object(a.jsxs)(P.a,{children:[Object(a.jsx)(g.a,{color:"primary",children:"Sample Rate: "}),Object(a.jsx)(g.a,{children:r.sample_rate}),Object(a.jsx)(g.a,{color:"primary",children:"Columns:"}),Object(a.jsx)(g.a,{children:r.column_location})]}):Object(a.jsx)(a.Fragment,{})]})]})},H=n(246),K=n(248),Q=n(192),V=n(53),W=n(191),X=n(189),Z=n(122),$=n(69),ee=Object(p.a)((function(e){return{formControl:{margin:e.spacing(3)},button:{margin:e.spacing(1,1,0,0)},root:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)}}})),te=function(e){var t=ee(),n=i.a.useState(e.streamingSource),c=Object(m.a)(n,2),r=c[0],o=c[1],s=i.a.useState("results"===e.streamingMode?"config-results":"config"),l=Object(m.a)(s,2),d=l[0],j=l[1],u=i.a.useState(e.deviceID),b=Object(m.a)(u,2),x=b[0],h=b[1],O=i.a.useState(!1),f=Object(m.a)(O,2),g=f[0],p=f[1],v=i.a.useState(""),y=Object(m.a)(v,2),S=y[0],C=y[1],w=i.a.useState([]),N=Object(m.a)(w,2),D=N[0],I=N[1],T=i.a.useState([{field:"id",headerName:"ID",width:120},{field:"device_id",headerName:"Device ID",width:240},{field:"name",headerName:"Name",width:240}]),k=Object(m.a)(T,2),_=k[0];k[1];return Object(a.jsxs)(P.a,{xs:12,container:!0,direction:"columns",children:[Object(a.jsx)(P.a,{xs:4,children:Object(a.jsx)("form",{onSubmit:function(t){t.preventDefault(),""!==x?(console.log(r),console.log(x),J.a.post("".concat("http://localhost:5555/")+d,{device_id:x,source:r.toLowerCase()}).then((function(t){console.log(t.data),console.log(e),e.setStreamingMode(t.data.mode),C("Configured Device")})).catch((function(e){e.response?(C(e.response.data.error.message.join(", ")),console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message)}))):C("Must Set DeviceID")},children:Object(a.jsxs)(V.a,{component:"fieldset",error:g,className:t.formControl,children:[Object(a.jsx)(X.a,{component:"legend",children:"Source:"}),Object(a.jsxs)(K.a,{"aria-label":"source",name:"source",value:r,onChange:function(e){o(e.target.value)},children:[Object(a.jsx)(Q.a,{value:"SERIAL",control:Object(a.jsx)(H.a,{}),label:"Serial"}),Object(a.jsx)(Q.a,{value:"BLE",control:Object(a.jsx)(H.a,{}),label:"BLE"}),Object(a.jsx)(Q.a,{value:"TCPIP",control:Object(a.jsx)(H.a,{}),label:"TCP/IP"}),Object(a.jsx)(Q.a,{value:"TEST",control:Object(a.jsx)(H.a,{}),label:"Test"})]}),Object(a.jsx)(X.a,{component:"legend",children:"Mode:"}),Object(a.jsxs)(K.a,{"aria-label":"mode",name:"Streaming Source",value:d,onChange:function(e){j(e.target.value)},children:[Object(a.jsx)(Q.a,{value:"config",control:Object(a.jsx)(H.a,{}),label:"Data Collection"}),Object(a.jsx)(Q.a,{value:"config-results",control:Object(a.jsx)(H.a,{}),label:"Recognition"})]}),Object(a.jsx)(X.a,{component:"legend",children:"Device ID:"}),Object(a.jsx)(Z.a,{id:"outlined-basic",variant:"outlined",value:x,onChange:function(e){h(e.target.value),C(" "),p(!1)}}),Object(a.jsx)(q.a,{type:"submit",variant:"contained",color:"primary",className:t.button,children:"Configure"}),Object(a.jsx)(W.a,{children:S})]})})}),Object(a.jsxs)(P.a,{xs:8,children:[Object(a.jsx)(P.a,{item:!0,children:Object(a.jsx)(q.a,{type:"submit",variant:"contained",color:"secondary",onClick:function(){J.a.post("".concat("http://localhost:5555/","scan"),{device_id:x,source:r.toLowerCase()}).then((function(e){console.log(e.data),I(e.data)}))},children:"Scan Devices"})}),Object(a.jsx)($.a,{rows:D,columns:_,onRowSelected:function(e){console.log(e.data.device_id),h(e.data.device_id)}})]})]})},ne=n(18),ae=n(117),ce=n.n(ae),ie=function(e){return Object(a.jsx)(ce.a,{data:e.data,layout:{autosize:!0}})},re=n(243),oe=Object(p.a)((function(e){return{root:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},section1:{margin:e.spacing(3,2)},section2:{margin:e.spacing(2),textAlign:"center"}}}));var se=function(e,t,n,a,c){a(!0),fetch(t,{method:"GET"}).then((function(e){var t=e.body.getReader(),i=new ReadableStream({start:function(e){!function i(){t.read().then((function(t){var r=t.done,o=t.value;if(r)return a(!1),void e.close();var s=new Int16Array(o.buffer);n(function(e,t){for(var n=e.length/t.length,a=Object(ne.a)(Array(n).keys()),c=t.map((function(e){return{x:a,y:[],name:e}})),i=0;i<e.length;i+=t.length)for(var r=0;r<t.length;r++)c[r].y.push(e[i+r]);return c}(s,c)),i()}))}()}});return new Response(i,{headers:{"Content-Type":"text/html"}})}))},le=function(e){var t=oe(),n=(Object(u.a)(),i.a.useState([])),c=Object(m.a)(n,2),r=c[0],o=c[1],s=i.a.useState(!1),l=Object(m.a)(s,2),d=l[0],j=l[1];return Object(a.jsxs)("div",{className:t.details,children:[Object(a.jsx)("div",{className:t.section1,children:Object(a.jsxs)(P.a,{container:!0,spacing:2,rows:!0,children:[Object(a.jsx)(P.a,{item:!0,xs:10,children:Object(a.jsx)(g.a,{component:"h3",variant:"h3",color:"secondary",children:"Mode: Data Collection"})}),Object(a.jsx)(P.a,{item:!0,xs:2,children:Object(a.jsx)("div",{className:t.controls,children:Object(a.jsx)(q.a,{"aria-label":"disconnect",color:"primary",variant:"contained",disabled:d,onClick:function(){se(0,"".concat("http://localhost:5555/","stream"),o,j,e.columns)},children:"Start Stream"})})})]})}),Object(a.jsx)(re.a,{variant:"middle"}),Object(a.jsx)("div",{className:t.section2,children:Object(a.jsx)(g.a,{variant:"subtitle1",color:"textSecondary"})}),Object(a.jsx)(ie,{data:r})]})},de=function(e){return Object(a.jsx)(g.a,{variant:"h1",component:"h2",children:function(e,t){if(0===e.length)return"No Results";t>e.length&&(t=e.length-1);for(var n={},a=e.length-t;a<e.length;a++)e[a].Classification in n?n[e[a].Classification]+=1:n[e[a].Classification]=1;for(var c=0,i=0,r=0,o=Object.entries(n);r<o.length;r++){var s=Object(m.a)(o[r],2),l=s[0],d=s[1];d>i&&(i=d,c=l)}return i<t/2?"UNC":c}(e.data,e.filter_length)})},je=n(249),ue=0,be=Object(p.a)((function(e){return{controls:{display:"flex-right",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},sliderroot:{width:250},sliderinput:{width:42},section1:{margin:e.spacing(3,2)},section2:{margin:e.spacing(2),textAlign:"center"}}}));var xe=function(e,t,n,a){ue=0,n([]),a(!0),fetch(t,{method:"GET"}).then((function(e){var t=e.body.getReader(),c=new ReadableStream({start:function(e){!function c(){t.read().then((function(t){var i=t.done,r=t.value;if(i)return a(!1),void e.close();for(var o=function(e){var t=String.fromCharCode.apply(null,e).split("\n");return t.pop(),t.map((function(e){return JSON.parse(e)}))}(r),s=0;s<o.length;s++)console.log(o[s]),o[s].id=ue,ue+=1,n((function(e){return[].concat(Object(ne.a)(e),[o[s]])}));c()}))}()}});return new Response(c,{headers:{"Content-Type":"text/html"}})}))},he=function(e){var t=i.a.useState([]),n=Object(m.a)(t,2),c=n[0],r=n[1],o=i.a.useState(!1),s=Object(m.a)(o,2),l=s[0],d=s[1],j=i.a.useState([{field:"id",headerName:"ID",width:70},{field:"ModelNumber",headerName:"Model ID",width:240},{field:"Classification",headerName:"Classification",width:240}]),b=Object(m.a)(j,2),x=b[0],h=(b[1],i.a.useState(1)),O=Object(m.a)(h,2),f=O[0],p=O[1],v=be();Object(u.a)();return Object(a.jsxs)(P.a,{children:[Object(a.jsx)("div",{className:v.section1,children:Object(a.jsxs)(P.a,{container:!0,spacing:2,rows:!0,children:[Object(a.jsx)(P.a,{item:!0,xs:10,children:Object(a.jsx)(g.a,{component:"h3",variant:"h3",color:"secondary",children:"Mode: Recogntion"})}),Object(a.jsx)(P.a,{item:!0,xs:2,children:Object(a.jsx)("div",{className:v.controls,children:Object(a.jsx)(q.a,{"aria-label":"disconnect",color:"primary",variant:"contained",disabled:l,onClick:function(){xe(0,"".concat("http://localhost:5555/","results"),r,d)},children:"Start Stream"})})})]})}),Object(a.jsx)(re.a,{variant:"middle"}),Object(a.jsx)("div",{className:v.section2,children:Object(a.jsx)(P.a,{alignContent:"center",children:Object(a.jsx)(de,{data:c,filter_length:f})})}),Object(a.jsx)(re.a,{variant:"middle"}),Object(a.jsx)("div",{className:v.section1,children:Object(a.jsxs)(P.a,{container:!0,spacing:3,alignItems:"center",children:[Object(a.jsx)(P.a,{item:!0,children:" Filter Length "}),Object(a.jsx)("div",{className:v.sliderroot,children:Object(a.jsx)(P.a,{item:!0,xs:!0,children:Object(a.jsx)(je.a,{value:"number"===typeof f?f:1,onChange:function(e,t){console.log(t),p(t)},"aria-labelledby":"input-slider",min:1,max:10})})}),Object(a.jsxs)(P.a,{item:!0,children:[" ",f," "]})]})}),Object(a.jsx)(re.a,{variant:"middle"}),Object(a.jsx)("div",{className:v.section1,children:Object(a.jsx)("div",{style:{height:600,width:"100%"},children:Object(a.jsx)($.a,{rows:c,columns:x,pageSize:15,sortModel:[{field:"id",sort:"desc"}]})})})]})},me=n(244),Oe=function(){var e=i.a.useState(0),t=Object(m.a)(e,2),n=t[0],c=t[1],r=i.a.useState(0),o=Object(m.a)(r,2),s=o[0],l=o[1],d=i.a.useState(0),j=Object(m.a)(d,2),u=j[0],b=j[1],x=i.a.useState([]),h=Object(m.a)(x,2),O=h[0],f=h[1],g=i.a.useState([]),p=Object(m.a)(g,2),y=p[0],S=p[1];var C=A();return Object(a.jsxs)("div",{className:C.root,children:[Object(a.jsx)(me.a,{}),Object(a.jsxs)(P.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(a.jsx)(v,{}),Object(a.jsx)(G,{onChange:function(e){n!=e&&c(e)}}),Object(a.jsxs)("main",{className:C.content,children:[0===n?Object(a.jsx)(Y,{setStreamingMode:l,setColumns:f,setStreamingSource:b,setDeviceID:S}):null,1===n?Object(a.jsx)(te,{setStreamingMode:l,streamingSource:u,streamingMode:s,deviceID:y}):null,2===n?"results"==s?Object(a.jsx)(he,{}):Object(a.jsx)(le,{columns:O}):null]})]})]})},fe=function(){return Object(a.jsx)(h,{children:Object(a.jsx)(Oe,{})})};o.a.render(Object(a.jsx)(fe,{}),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.9ef576b8.chunk.js.map